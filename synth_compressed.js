// Do not edit this file; automatically generated by build.py.
'use strict';


Blockly.SYNTH=new Blockly.Generator("SYNTH");Blockly.SYNTH.addReservedWords("and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,not,or,pass,print,raise,return,try,while,with,yield,True,False,None,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,abs,divmod,input,open,staticmethod,all,enumerate,int,ord,str,any,eval,isinstance,pow,sum,basestring,execfile,issubclass,print,super,bin,file,iter,property,tuple,bool,filter,len,range,type,bytearray,float,list,raw_input,unichr,callable,format,locals,reduce,unicode,chr,frozenset,long,reload,vars,classmethod,getattr,map,repr,xrange,cmp,globals,max,reversed,zip,compile,hasattr,memoryview,round,__import__,complex,hash,min,set,apply,delattr,help,next,setattr,buffer,dict,hex,object,slice,coerce,dir,id,oct,sorted,intern");
Blockly.SYNTH.ORDER_ATOMIC=0;Blockly.SYNTH.ORDER_COLLECTION=1;Blockly.SYNTH.ORDER_STRING_CONVERSION=1;Blockly.SYNTH.ORDER_MEMBER=2;Blockly.SYNTH.ORDER_FUNCTION_CALL=2;Blockly.SYNTH.ORDER_EXPONENTIATION=3;Blockly.SYNTH.ORDER_UNARY_SIGN=4;Blockly.SYNTH.ORDER_BITWISE_NOT=4;Blockly.SYNTH.ORDER_MULTIPLICATIVE=5;Blockly.SYNTH.ORDER_ADDITIVE=6;Blockly.SYNTH.ORDER_BITWISE_SHIFT=7;Blockly.SYNTH.ORDER_BITWISE_AND=8;Blockly.SYNTH.ORDER_BITWISE_XOR=9;Blockly.SYNTH.ORDER_BITWISE_OR=10;
Blockly.SYNTH.ORDER_RELATIONAL=11;Blockly.SYNTH.ORDER_LOGICAL_NOT=12;Blockly.SYNTH.ORDER_LOGICAL_AND=13;Blockly.SYNTH.ORDER_LOGICAL_OR=14;Blockly.SYNTH.ORDER_CONDITIONAL=15;Blockly.SYNTH.ORDER_LAMBDA=16;Blockly.SYNTH.ORDER_NONE=99;
Blockly.SYNTH.init=function(a){Blockly.SYNTH.PASS=this.INDENT+"pass\n";Blockly.SYNTH.definitions_=Object.create(null);Blockly.SYNTH.functionNames_=Object.create(null);Blockly.SYNTH.variableDB_?Blockly.SYNTH.variableDB_.reset():Blockly.SYNTH.variableDB_=new Blockly.Names(Blockly.SYNTH.RESERVED_WORDS_);var b=[];a=Blockly.Variables.allVariables(a);for(var d=0;d<a.length;d++)b[d]=Blockly.SYNTH.variableDB_.getName(a[d],Blockly.Variables.NAME_TYPE)+" = None";Blockly.SYNTH.definitions_.variables=b.join("\n")};
Blockly.SYNTH.finish=function(a){var b=[],d=[],c;for(c in Blockly.SYNTH.definitions_){var e=Blockly.SYNTH.definitions_[c];e.match(/^(from\s+\S+\s+)?import\s+\S+/)?b.push(e):d.push(e)}delete Blockly.SYNTH.definitions_;delete Blockly.SYNTH.functionNames_;Blockly.SYNTH.variableDB_.reset();return(b.join("\n")+"\n\n"+d.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+a};Blockly.SYNTH.scrubNakedValue=function(a){return a+"\n"};
Blockly.SYNTH.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/%/g,"\\%").replace(/'/g,"\\'");return"'"+a+"'"};
Blockly.SYNTH.scrub_=function(a,b){var d="";if(!a.outputConnection||!a.outputConnection.targetConnection){var c=a.getCommentText();c&&(d+=Blockly.SYNTH.prefixLines(c,"# ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(c=a.inputList[e].connection.targetBlock())&&(c=Blockly.SYNTH.allNestedComments(c))&&(d+=Blockly.SYNTH.prefixLines(c,"# "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=Blockly.SYNTH.blockToCode(e);return d+b+e};Blockly.SYNTH.name=function(a){return[a.getFieldValue("Name"),Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.generate_if=function(a){var b=a.getFieldValue("label"),d=Blockly.SYNTH.valueToCode(a,"label",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.statementToCode(a,"NAME");a=a.getFieldValue("endgenerate");return b+": if "+d+" generate\n"+c+"end "+a+";\n"};
Blockly.SYNTH.architecture=function(a){a.getFieldValue("architecture_name");var b=a.getFieldValue("entity_name"),d=Blockly.SYNTH.statementToCode(a,"declarations"),c=Blockly.SYNTH.statementToCode(a,"concurent_statements");a.getFieldValue("end_arch_name");var e=c.split("\n");for(a=0;a<e.length-1;a++)if(0<e[a].search("association"))for(c=a+1;c<e.length-1;c++){var f=e[a].replace("(","");f=f.replace(")","");f=f.trim();f=f.split(" ");var g=e[c].replace("(","");g=g.trim();g=g.split(" ");for(var h=2;h<f.length-
1;h+=2)if(f[h]==g[0]){f=e[a];e[a]=e[c];e[c]=f;break}}c="";for(a=0;a<e.length-1;a++)f=e[a].trim(),f=f.split(" "),f=f[0],-1!=f.indexOf("_i")&&(f=f.split("="),c=c+f[0]+"=''\n");for(a=0;a<e.length-1;a++)c=c.concat(e[a]+"\n"),e[a]=e[a].trim(),e[a]=e[a].split(" ");c=d+"var error"+b+'=""\n\nfunction '+b+"(){\n"+c;f=c.split(/\r\n|\r|\n/);e=[];d=[];for(a=0;a<f.length;a++)g=f[a].trim().split(" "),"function"==g[0]&&g[1]&&-1!=g[1].indexOf("latchstr")&&e.push(g[1]),"Process"==g[0]&&"function"==g[2]&&g[2]&&(e.push(g[3]),
d.push(g[0]));d="";for(a=0;a<e.length;a++)for(g=1,h=a+1;h<e.length;h++)e[a]==e[h]&&(f=e[a].split("f(")[0],1==g&&(c=c.replace("function "+e[h],"function "+e[h].split("(")[0]+"_"+g+"(latchstr,"),c=c.split("function "+e[h].split("(")[0]+"_"+g+"(latchstr, bypass){"),c=c[0]+"function "+e[h].split("(")[0]+"_"+g+"(latchstr, bypass){\nvar "+f+"_"+g+" = {val:false, pre:'', data:'', wave:'', type:"+f+".type, name:'"+f+"_"+g+"'};"+c[1],c=c.replace("return "+f+".val","return "+f+"_"+g),c=c.replace(f+".val=",
f+"_"+g+".val="),c=c.replace(e[a].split("(")[0]+'("", false)',""),g+=1),c=c.replace("function "+e[h],"function "+e[h].split("(")[0]+"_"+g+"(latchstr,"),c=c.split("function "+e[h].split("(")[0]+"_"+g+"(latchstr, bypass){"),c=c[0]+"function "+e[h].split("(")[0]+"_"+g+"(latchstr, bypass){\nvar "+f+"_"+g+" = {val:false, pre:'', data:'', wave:'', type:"+f+".type, name:'"+f+"_"+g+"'};"+c[1],c=c.replace("return "+f+".val","return "+f+"_"+g),c=c.split("var "+f+"_"+g),c[1]=c[1].replace(f+".val=",f+"_"+g+".val="),
c=c[0]+"var "+f+"_"+g+c[1],c=c.replace(e[a].split("(")[0]+'("", false)',""),-1!=c.indexOf("function "+e[h])&&(g+=1)),f=e[a].split("f(")[0],(""==d||-1==d.search("function "+f))&&-1==c.search(f+".type='std_logic';")&&1<g&&(d=d+f+"f('', false)\n",d=d+"var "+f+"r='';\n",d=d+"function "+e[a]+" bypass){\n",d=d+"if ("+f+".type=='std_logic'){\n",d=d+f+"r="+f+"f_1('', true)\n",d=d+"for (var m=2;m<"+(g+1)+";m++){\n",d=d+f+'r=resolution(eval("'+f+'f_" + m + "(latchstr, true)"),'+f+"r)\n}",d+="if (!bypass){\n",
d=d+"if("+f+"r=='u' || "+f+"r=='w' || "+f+"r=='d'){"+f+".data.push("+f+"r); "+f+"r='='}\n",d=d+"if ("+f+"r=="+f+".pre && "+f+'.wave!="") {'+f+".wave="+f+'.wave + "."} else {'+f+".wave="+f+".wave + "+f+"r}\n",d=d+f+".pre="+f+"r\n",d+="}\n",d=d+"return "+f+"r\n",d+="}\n",d=d+"error"+b+"=error"+b+"+'<br>Error: one or more sources are driving signal c which is not from a resolved type (std_logic)'\n",d+="}\n");e=b=0;h="";f=c.split(/\r\n|\r|\n/);for(a=0;a<f.length;a++)g=f[a].trim().split(" "),"Process"==
g[0]&&"function"==g[2]&&(g[3].indexOf("_"),b+=1,h=h+"function "+g[3]+" bypass){return'hold'}\n"),"Process}"==g[0]&&"{function"!=g[2]&&(c=c.replace("  Process} else {","  Process_} else {"+h),e=b,h="");0<e&&-1!=f[f.length-2].indexOf("Process")&&(c+="}\n");c=c+d+"}\n";c=c.replace(/Process_/g,"");return c=c.replace(/Process/g,"")};
Blockly.SYNTH.port_map=function(a){var b=a.getFieldValue("label"),d=a.getFieldValue("component");a=Blockly.SYNTH.statementToCode(a,"NAME");a=a.substring(0,a.length-0);return b+": "+d+a+";\n"};Blockly.SYNTH.map_list=function(a){var b=a.getFieldValue("map");a=Blockly.SYNTH.valueToCode(a,"port",Blockly.SYNTH.ORDER_ATOMIC);return"\n"+b+a};
Blockly.SYNTH.map_association=function(a){var b=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"signal_type",Blockly.SYNTH.ORDER_NONE);return b+" => "+a+",\n"};Blockly.SYNTH.constant2=function(a){var b=Blockly.SYNTH.valueToCode(a,"constant_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"constant_type",Blockly.SYNTH.ORDER_NONE);return"constant "+b+" : "+a+"\n"};Blockly.SYNTH.name=function(a){return[a.getFieldValue("Name"),Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.generate_if=function(a){var b=a.getFieldValue("label"),d=Blockly.SYNTH.valueToCode(a,"label",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.statementToCode(a,"NAME");a=a.getFieldValue("endgenerate");return b+": if "+d+" generate\n"+c+"end "+a+";\n"};
Blockly.SYNTH.architecture=function(a){a.getFieldValue("architecture_name");var b=a.getFieldValue("entity_name"),d=Blockly.SYNTH.statementToCode(a,"declarations"),c=Blockly.SYNTH.statementToCode(a,"concurent_statements");a.getFieldValue("end_arch_name");var e=c.split("\n");for(a=0;a<e.length-1;a++)if(0<e[a].search("association"))for(c=a+1;c<e.length-1;c++){var f=e[a].replace("(","");f=f.replace(")","");f=f.trim();f=f.split(" ");var g=e[c].replace("(","");g=g.trim();g=g.split(" ");for(var h=2;h<f.length-
1;h+=2)if(f[h]==g[0]){f=e[a];e[a]=e[c];e[c]=f;break}}c="";for(a=0;a<e.length-1;a++)f=e[a].trim(),f=f.split(" "),f=f[0],-1!=f.indexOf("_i")&&(f=f.split("="),c=c+f[0]+"=''\n");for(a=0;a<e.length-1;a++)c=c.concat(e[a]+"\n"),e[a]=e[a].trim(),e[a]=e[a].split(" ");c=d+'var error=""\n\nfunction '+b+"(){\n"+c;e=c.split(/\r\n|\r|\n/);d=[];b=[];for(a=0;a<e.length;a++)f=e[a].trim().split(" "),"function"==f[0]&&f[1]&&-1!=f[1].indexOf("latchstr")&&d.push(f[1]),"Process"==f[0]&&"function"==f[2]&&f[2]&&(d.push(f[3]),
b.push(f[0]));b="";for(a=0;a<d.length;a++)for(f=1,g=a+1;g<d.length;g++)d[a]==d[g]&&(e=d[a].split("f(")[0],1==f&&(c=c.replace("function "+d[g],"function "+d[g].split("(")[0]+"_"+f+"(latchstr,"),c=c.split("function "+d[g].split("(")[0]+"_"+f+"(latchstr, bypass){"),c=c[0]+"function "+d[g].split("(")[0]+"_"+f+"(latchstr, bypass){\nvar "+e+"_"+f+" = {val:false, pre:'', data:'', wave:'', type:'', name:'"+e+"_"+f+"'};\n"+c[1],c=c.replace(d[a].split("(")[0]+'("", false)',""),f+=1),c=c.replace("function "+
d[g],"function "+d[g].split("(")[0]+"_"+f+"(latchstr, bypass){"),c.split("function "+d[g].split("(")[0]+"_"+f+"(latchstr, bypass){"),c=c.replace(d[a].split("(")[0]+'("", false)',""),-1!=c.indexOf("function "+d[g])&&(f+=1)),e=d[a].split("f(")[0],(""==b||-1==b.search("function "+e))&&-1==c.search(e+".type='std_logic';")&&1<f&&(b=b+e+"f('', false)\n",b=b+"var "+e+"r='';\n",b=b+"function "+d[a]+" bypass){\n",b=b+"if ("+e+".type=='std_logic'){\n",b=b+e+"r="+e+"f_1('', true)\n",b=b+"for (var m=2;m<"+(f+
1)+";m++){\n",b=b+e+'r=resolution(eval("'+e+'f_" + m + "(latchstr, true)"),'+e+"r)\n}",b+="if (!bypass){\n",b=b+"if("+e+"r=='u' || "+e+"r=='w' || "+e+"r=='d'){"+e+".data.push("+e+"r); "+e+"r='='}\n",b=b+"if ("+e+"r=="+e+".pre && "+e+'.wave!="") {'+e+".wave="+e+'.wave + "."} else {'+e+".wave="+e+".wave + "+e+"r}\n",b=b+e+".pre="+e+"r\n",b+="}\n",b=b+"return "+e+"r\n",b+="}\n",b+="error=error + '<br>Error: one or more sources are driving signal c which is not from a resolved type (std_logic)'\n",b+=
"}\n");g=d=0;h="";e=c.split(/\r\n|\r|\n/);for(a=0;a<e.length;a++)f=e[a].trim().split(" "),"Process"==f[0]&&"function"==f[2]&&(f[3].indexOf("_"),d+=1,h=h+"function "+f[3]+" bypass){return'hold'}\n"),"Process}"==f[0]&&"{function"!=f[2]&&(c=c.replace("  Process} else {","  Process_} else {"+h),g=d,h="");0<g&&-1!=e[e.length-2].indexOf("Process")&&(c+="}\n");c=c+b+"}\n";c=c.replace(/Process_/g,"");return c=c.replace(/Process/g,"")};
Blockly.SYNTH.port_map=function(a){var b=a.getFieldValue("label"),d=a.getFieldValue("component");a=Blockly.SYNTH.statementToCode(a,"NAME");a=a.substring(0,a.length-0);return b+": "+d+a+";\n"};Blockly.SYNTH.map_list=function(a){var b=a.getFieldValue("map");a=Blockly.SYNTH.valueToCode(a,"port",Blockly.SYNTH.ORDER_ATOMIC);return"\n"+b+a};
Blockly.SYNTH.map_association=function(a){var b=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"signal_type",Blockly.SYNTH.ORDER_NONE);return b+" => "+a+",\n"};Blockly.SYNTH.constant2=function(a){var b=Blockly.SYNTH.valueToCode(a,"constant_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"constant_type",Blockly.SYNTH.ORDER_NONE);return"constant "+b+" : "+a+"\n"};Blockly.SYNTH.process=function(a){a.getFieldValue("label_begin");Blockly.SYNTH.statementToCode(a,"declarations");var b=Blockly.SYNTH.statementToCode(a,"begin");a.getFieldValue("label_end");a=a.getFieldValue("sens")?"("+a.getFieldValue("sens")+")\n":"\n";var d="if (";a=a.slice(1,a.length-2);a=a.split(",");for(var c=0;c<a.length;c++)d=c<a.length-1?d+a[c]+".pre!="+a[c]+".val || ":d+a[c]+".pre!="+a[c]+".val){";b=b.replace(/\n/g,"\nProcess");d=d+b+"} else {\n";b.split("\n");return d+"}"};
Blockly.SYNTH.procedure_call=function(a){var b=Blockly.SYNTH.valueToCode(a,"procedurename",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"values",Blockly.SYNTH.ORDER_NONE);return b+" ("+a+");\n"};
Blockly.SYNTH.generate=function(a){var b=a.getFieldValue("generate_label"),d=Blockly.SYNTH.valueToCode(a,"start",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.valueToCode(a,"end",Blockly.SYNTH.ORDER_NONE),e=Blockly.SYNTH.statementToCode(a,"generate");a=a.getFieldValue("end_label");return b+": for "+d+" in "+c+" generate\n"+e+"end generate "+a+";\n"};
Blockly.SYNTH.case3={};Blockly.SYNTH.controls_case=function(a){var b=a.getFieldValue("case_name");var d=a.getFieldValue("Q"),c=Blockly.SYNTH.statementToCode(a,"ADD0");var e="case "+b+" is\n"+("when "+d+" =>\n")+c;for(b=1;b<=a.elseifCount_;b++)d=a.getFieldValue("Q"+b),c=Blockly.SYNTH.statementToCode(a,"DO"+b),e+="when "+d+" =>\n",e+=c;a.elseCount_&&(c=Blockly.SYNTH.statementToCode(a,"ELSE"),e+="when others =>\n",e+=c);return e+="end case;\n"};Blockly.SYNTH.procedure=function(a){var b=a.getFieldValue("procedure_name"),d=Blockly.SYNTH.statementToCode(a,"parameter_list"),c=Blockly.SYNTH.statementToCode(a,"declaration"),e=Blockly.SYNTH.statementToCode(a,"sequential");a=a.getFieldValue("end_name");b="procedure "+b+"(\n"+d+") is\nbegin"+c+"\n";return b=b+e+"end "+a+";\n"};
Blockly.SYNTH.function_pack=function(a){var b=a.getFieldValue("name"),d=Blockly.SYNTH.statementToCode(a,"declaration");a=Blockly.SYNTH.valueToCode(a,"return",Blockly.SYNTH.ORDER_NONE);d=d.substring(0,d.length-1);return"function "+b+" (\n"+d+")\n  return "+a+";\n"};Blockly.SYNTH.component_instantiation=function(a){var b=a.getFieldValue("component_name"),d=Blockly.SYNTH.statementToCode(a,"generic_port");a=a.getFieldValue("end_name");return"component "+b+"\n"+d+"end component "+a+";\n"};
Blockly.SYNTH.alias=function(a){var b=Blockly.SYNTH.valueToCode(a,"alias",Blockly.SYNTH.ORDER_NONE);Blockly.SYNTH.valueToCode(a,"name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE);return"alias "+b+": "+b+" is "+a+";\n"};
Blockly.SYNTH.signal=function(a){a.getFieldValue("signal");var b=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE);Blockly.SYNTH.valueToCode(a,"signal_type",Blockly.SYNTH.ORDER_NONE);return"var "+b+"=false\nvar "+b+"_pre=false;\nvar "+b+"_wave='';\nvar "+b+"_data=[];\n"};
Blockly.SYNTH.signal_init=function(a){var b=a.getFieldValue("signal"),d=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.valueToCode(a,"signal_type",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"signal_init",Blockly.SYNTH.ORDER_NONE);return b+" "+d+": "+c+" := "+a+";\n"};
Blockly.SYNTH.variable=function(a){var b=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"list",Blockly.SYNTH.ORDER_NONE);return"variable "+b+": "+a+";\n"};
Blockly.SYNTH.association=function(a){var b=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE);a.getFieldValue("association");var d=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE);a=b+'f("", false)\nfunction '+b+"f(latchstr, bypass){\nif (latchstr.indexOf('"+b+"')==-1){\nvar temp=latchstr + '"+b+"';\n";var c="";if(-1==d.indexOf("temp")){for(var e="nand and nor or xnor xor srl sll".split(" "),f=" && ; && ; || ; || ; != ; != ; << ; >> ".split(";"),g=0;g<e.length;g++)if(-1!=
d.indexOf(e[g]))if(d.match(/\(/g))if(d.match(/\)/g)){if(d.match(/\(/g).length!=d.match(/\)/g).length){alert("there is a mismatch between the amount of left and right brackets");break}}else{alert("there is a mismatch between the amount of left and right brackets");break}else d="("+d+")";var h=d.split(" ");for(g=1;g<e.length;g+=2)for(var k=1;k<h.length;k+=2)h[k]==e[g]&&(h[k]=h[k].replace(e[g],f[g]),"f(temp, true)"==!h[k-1]&&(h[k-1]+="f(temp, true)"),h[k+1].idexOf(")")?h[k+1]=h[k+1].replace(")","f(temp, true))"):
h[k+1]+="f(temp, true)");for(g=0;g<e.length;g+=2)for(k=1;k<h.length;k+=2)if(-1!=h[k].indexOf(e[g])){h[k]=h[k].replace(e[g],f[g]);h[k-1]+="f(temp, true)";h[k+1]+="f(temp, true)";var m=1;for(var l=k-1;0<=l;l-=2)if(h[l].match(/\(/)&&(m-=h[l].match(/\(/g).length),h[l].match(/\)/g)&&(m+=h[l].match(/\)/g).length),0>=m&&h[l].match(/\(/g)){d="";h[l]=h[l].replace(/\(/g,"( ");var n=h[l].split(" ");n[-m]="!"+n[-m];h[l]="";for(m=0;m<n.length;m++)h[l]+=n[m];break}}for(g=0;g<h.length;g++)d=d+h[g]+" "}e=d.replace(/^\s/,
"");e=e.replace(/\s\s+/g," ");e=e.replace(/\( /g,"(");e=e.replace(/ \)/g,")");for(g=d=0;g<e.length;g++)if(")"==e[g]?--d:"("==e[g]&&(d+=1),0>d){alert("error: brackets are placed wrong");break}d=e;e=e.replace(/xnor|nor|xor|or|nand|and|not\(/g,"");e=e.replace(/\(/g,"");e=e.replace(/\)/g,"");e=e.replace(/!/g,"");e=e.replace(/ftemp,true/g,"");e=e.replace(/ftemp, true/g,"");e=e.split(" ");g=[];for(k=0;k<e.length;k+=2)-1==c.indexOf(e[k])&&-1==e.indexOf("f(temp, true)")&&-1==e.indexOf("0")&&(c=c+e[k]+"f(temp, true)\n",
g=g+e[k]+".type,");g="["+g+b+".type]\n";d=d.replace(" ,",",");d=(d+";").replace(");",",temptype);");a=a+"var temptype="+g+c;a=a+b+".val="+d+"\nif (!bypass){\n";a=a+"if("+b+".val=='u' || "+b+".val=='w' || "+b+".val=='d'){"+b+".data.push("+b+".val); "+b+".val='='}\n";a=a+"if ("+b+".val=="+b+".pre && "+b+'.wave!="") {'+b+".wave="+b+'.wave + "."} else {'+b+".wave="+b+".wave + "+b+".val}\n";a=a+b+".pre="+b+".val\n}";a+="}\n";a+="else {\n";a=a+"alert('you made a latch at signal ' + '"+b+"')\n";a+="latch=true\n";
a+="}\n";return a=a+"return "+b+".val\n}\n"};Blockly.SYNTH.name_type=function(a){var b=Blockly.SYNTH.valueToCode(a,"name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE);return b+" : "+a+"\n"};
Blockly.SYNTH.association_delay=function(a){var b=Blockly.SYNTH.valueToCode(a,"signal_name",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"delay",Blockly.SYNTH.ORDER_NONE);return b+" <= "+d+" after "+a+";\n"};Blockly.SYNTH.attribute=function(a){var b=Blockly.SYNTH.valueToCode(a,"atribute_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"type_name",Blockly.SYNTH.ORDER_NONE);return"attribute "+b+": "+a+";\n"};
Blockly.SYNTH.attribute_of=function(a){var b=Blockly.SYNTH.valueToCode(a,"atribute_name",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.valueToCode(a,"type_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"value",Blockly.SYNTH.ORDER_NONE);return"attribute "+b+" of "+d+": "+c+" is "+a+";\n"};
Blockly.SYNTH.type=function(a){var b=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("type_list");a=Blockly.SYNTH.valueToCode(a,"list",Blockly.SYNTH.ORDER_NONE);return"type "+b+" "+d+" ("+a+");\n"};Blockly.SYNTH.subtype=function(a){var b=Blockly.SYNTH.valueToCode(a,"subtype",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"base_type",Blockly.SYNTH.ORDER_NONE);return"subtype "+b+" is "+a+";\n"};
Blockly.SYNTH.subtype_range=function(a){var b=Blockly.SYNTH.valueToCode(a,"subtype",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"base_type",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE);return"subtype "+b+" is "+d+" range "+a+";\n"};
Blockly.SYNTH.type_array=function(a){var b=Blockly.SYNTH.valueToCode(a,"type1",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"type2",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"range",Blockly.SYNTH.ORDER_NONE);return"type "+b+" is array ("+d+") of "+a+";\n"};
Blockly.SYNTH.array_type_type=function(a){var b=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"index_type",Blockly.SYNTH.ORDER_NONE),c=Blockly.SYNTH.valueToCode(a,"range",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"data_type",Blockly.SYNTH.ORDER_NONE);return"type "+b+" is array ("+d+" "+c+") of "+a+";\n"};
Blockly.SYNTH.alias=function(a){var b=Blockly.SYNTH.valueToCode(a,"alias_name",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"name",Blockly.SYNTH.ORDER_NONE);return"alias "+b+" : "+d+" is "+a+";\n"};
Blockly.SYNTH.disconnect=function(a){var b=Blockly.SYNTH.valueToCode(a,"signal",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"time",Blockly.SYNTH.ORDER_NONE);return"disconnect "+b+": "+d+" after "+a+";\n"};Blockly.SYNTH.record=function(a){var b=a.getFieldValue("record_name"),d=Blockly.SYNTH.statementToCode(a,"record");a=a.getFieldValue("record_name_end");return"type "+b+" is record\n"+d+"end record "+a+";\n"};
Blockly.SYNTH.proc_pin_name=function(a){var b=a.getFieldValue("type"),d=Blockly.SYNTH.valueToCode(a,"pin_name",Blockly.SYNTH.ORDER_NONE),c=a.getFieldValue("in_out");a=Blockly.SYNTH.valueToCode(a,"pin_type",Blockly.SYNTH.ORDER_NONE);return b+" "+d+" "+c+" "+a+";\n"};Blockly.SYNTH.entity=function(a){a.getFieldValue("entity");var b=Blockly.SYNTH.statementToCode(a,"generic_port");a.getFieldValue("end_entity");return'<script src="http://www.blocklyvhdl.com/demo/wavedrom/skins/default.js" type="text/javascript">\x3c/script>\n<script src="http://www.blocklyvhdl.com/demo/wavedrom/wavedrom.min.js" type="text/javascript">\x3c/script><script>\n'+b+"\nvar latch=false\n"};
Blockly.SYNTH.generic=function(a){a.getFieldValue("port_list");return Blockly.SYNTH.statementToCode(a,"generic_inputs",Blockly.SYNTH.ORDER_NONE)};
Blockly.SYNTH.port_pin_name=function(a){var b=Blockly.SYNTH.valueToCode(a,"pin_name",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("in_out");a=Blockly.SYNTH.valueToCode(a,"pin_type",Blockly.SYNTH.ORDER_NONE);var c="";"in"==d?(c=c+"var "+b+'= {val:false, pre:"", data:"", wave:"", type:"", name:"'+b+'"};\n'+b+'.type="'+a+'";\nfunction '+b+"f(latchstr, bypass) {\nif ("+b+".val=='' | "+b+".val== ' '){"+b+".val='u'}\n",c+="if (!bypass){\n",c=c+"if("+b+".val=='u' || "+b+".val=='w' || "+b+".val=='d'){"+b+
".data.push("+b+".val); "+b+".val='='}\n",c=c+"if ("+b+".val=="+b+".pre && "+b+'.wave!="") {'+b+".wave="+b+'.wave + "."} else {'+b+".wave="+b+".wave + "+b+".val}\n",c=c+b+".pre="+b+".val\n",c+="}\n",c=c+"return "+b+"\n",c+="}\n"):c=c+"var "+b+'= {val:false, pre:"", data:"", wave:"", type:"'+a+'"};\n'+b+'.type="'+a+'";\n';return c};Blockly.SYNTH.operator=function(a){var b=Blockly.SYNTH.valueToCode(a,"in_a",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("operator");a=Blockly.SYNTH.valueToCode(a,"in_b",Blockly.SYNTH.ORDER_NONE);var c="";"warning"!=d&&(c=c+d+"("+b,c=-1==b.lastIndexOf(")")?c+"f(temp, true) , "+a:c+" , "+a,-1==a.lastIndexOf(")")&&(c+="f(temp, true)"),c+=" )");return[c,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.qualified=function(a){var b=a.getFieldValue("name");a=a.getFieldValue("range");return[b+"'"+a,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.not=function(a){a=Blockly.SYNTH.valueToCode(a,"not_value",Blockly.SYNTH.ORDER_NONE);var b="not("+a;b=-1==a.lastIndexOf(")")?b+"f(temp, true) , 0)":b+", 0)";return[b,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.others=function(a){return["others => "+Blockly.SYNTH.valueToCode(a,"others",Blockly.SYNTH.ORDER_NONE),Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.condition=function(a){var b=Blockly.SYNTH.valueToCode(a,"A",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("condition");a=Blockly.SYNTH.valueToCode(a,"B",Blockly.SYNTH.ORDER_NONE);switch(d){case "=":var c="==";break;case "/=":c="!="}return[b+" "+c+" "+a,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.type_conversion=function(a){var b=a.getFieldValue("conversion"),d=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"to_integer",Blockly.SYNTH.ORDER_NONE);return[d+"("+b+"("+a+"))",Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.conversion=function(a){var b=a.getFieldValue("std_logic");a=Blockly.SYNTH.valueToCode(a,"NAME",Blockly.SYNTH.ORDER_ATOMIC);return[b+a,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.std_match=function(a){var b=Blockly.SYNTH.valueToCode(a,"left",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"right",Blockly.SYNTH.ORDER_NONE);return"std_match("+b+", "+a+");\n"};Blockly.SYNTH.range_type=function(a){return["range "+Blockly.SYNTH.valueToCode(a,"type",Blockly.SYNTH.ORDER_NONE),Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.range1=function(a){var b=Blockly.SYNTH.valueToCode(a,"msb",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("downto");a=Blockly.SYNTH.valueToCode(a,"lsb",Blockly.SYNTH.ORDER_NONE);return[b+" "+d+" "+a,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.range2=function(a){var b=Blockly.SYNTH.valueToCode(a,"name",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("range");b=b+"'"+d;a.getFieldValue("N");return[b,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.range2_index=function(a){var b=Blockly.SYNTH.valueToCode(a,"name",Blockly.SYNTH.ORDER_NONE),d=a.getFieldValue("range");a=Blockly.SYNTH.valueToCode(a,"N",Blockly.SYNTH.ORDER_NONE);b=b+"'"+d;a&&(b=b+"("+a+")");return[b,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.range_var=function(a){var b=Blockly.SYNTH.valueToCode(a,"variable",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"range",Blockly.SYNTH.ORDER_NONE);return[b+" range "+a,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.index=function(a){var b=Blockly.SYNTH.valueToCode(a,"index_name",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"index_list",Blockly.SYNTH.ORDER_NONE);return[b+"("+a+")",Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.all=function(a){return["<>",Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.time_association=function(a){var b=Blockly.SYNTH.valueToCode(a,"time",Blockly.SYNTH.ORDER_NONE);a=a.getFieldValue("unit");return[b+" "+a,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH["function"]=function(a){var b=a.getFieldValue("function_name"),d=Blockly.SYNTH.statementToCode(a,"parameters");d=d.substring(0,d.length-1);var c=Blockly.SYNTH.valueToCode(a,"return",Blockly.SYNTH.ORDER_NONE),e=Blockly.SYNTH.statementToCode(a,"declaration"),f=Blockly.SYNTH.statementToCode(a,"sequential"),g=a.getFieldValue("end_name");a=Blockly.SYNTH.valueToCode(a,"return2",Blockly.SYNTH.ORDER_NONE);return"function "+b+" (\n"+d+")\n  return "+c+" is\n"+e+"begin\n"+f+"return "+a+";\nend "+
g+";\n"};Blockly.SYNTH.function_call=function(a){var b=a.getFieldValue("function_name");a=a.getFieldValue("parameter_list");return[b+"("+a+");\n",Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.library=function(a){var b=Blockly.SYNTH.statementToCode(a,"declarations");a.getFieldValue("library");return"<script>var library=[];\x3c/script>\n"+b};Blockly.SYNTH.ieee=function(a){a=a.getFieldValue("IEEE");return'<script src="http://www.blocklyvhdl.com/demo/library/'+a+'.js" type="text/javascript">\x3c/script>\n<script>library.push("'+a+'")\x3c/script>\n'};Blockly.SYNTH.std_textio=function(a){return"use STD.textio;\n"};
Blockly.SYNTH.use=function(a){var b=Blockly.SYNTH.valueToCode(a,"use",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"library",Blockly.SYNTH.ORDER_NONE);return"use "+b+"."+a+";\n"};Blockly.SYNTH.std_logic=function(a){return[a.getFieldValue("std_bit"),Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.std_logic_init=function(a){var b=a.getFieldValue("std_bit");a=Blockly.SYNTH.valueToCode(a,"bit_value",Blockly.SYNTH.ORDER_NONE);return[b+" := "+a,Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.vector=function(a){var b=a.getFieldValue("vector"),d=Blockly.SYNTH.valueToCode(a,"msb",Blockly.SYNTH.ORDER_NONE),c=a.getFieldValue("range");a=Blockly.SYNTH.valueToCode(a,"lsb",Blockly.SYNTH.ORDER_NONE);return[b+"("+d+" "+c+" "+a+")",Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.vector_init=function(a){var b=a.getFieldValue("vector"),d=Blockly.SYNTH.valueToCode(a,"msb",Blockly.SYNTH.ORDER_NONE),c=a.getFieldValue("range"),e=Blockly.SYNTH.valueToCode(a,"lsb",Blockly.SYNTH.ORDER_NONE);a=Blockly.SYNTH.valueToCode(a,"init",Blockly.SYNTH.ORDER_NONE);return[b+"("+d+" "+c+" "+e+") :="+a,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.integer=function(a){return[a.getFieldValue("integer"),Blockly.SYNTH.ORDER_NONE]};
Blockly.SYNTH.integer_init=function(a){var b=a.getFieldValue("integer");a=Blockly.SYNTH.valueToCode(a,"integer_value",Blockly.SYNTH.ORDER_NONE);return[b+" := "+a,Blockly.SYNTH.ORDER_NONE]};Blockly.SYNTH.select={};
Blockly.SYNTH.controls_select=function(a){var b=a.getFieldValue("label");var d=a.getFieldValue("A");a.getFieldValue("B");var c=a.getFieldValue("Q"),e=a.getFieldValue("Y"),f=Blockly.SYNTH.valueToCode(a,"ADD0",Blockly.SYNTH.ORDER_NONE)||"false";Blockly.SYNTH.valueToCode(a,"C",Blockly.SYNTH.ORDER_NONE);e=b+": with "+d+" select\n"+(c+" <= "+e+" when "+f+",");a.elseCount_&&(c=Blockly.SYNTH.valueToCode(a,"ELSE",Blockly.SYNTH.ORDER_NONE)||"false",e+="\n else "+c);for(b=1;b<a.itemCount_;b++)a.getFieldValue("A"+b),
d=a.getFieldValue("B"+b),c=Blockly.SYNTH.valueToCode(a,"ADD"+b,Blockly.SYNTH.ORDER_NONE)||"false",c=c.replace(/, /g," | "),e=b<a.itemCount_?e+("\n "+d+" when "+c+","):e+("\n "+d+" when "+c),b==a.elseifCount_&&(c=Blockly.SYNTH.valueToCode(a,"ELSE"+b,Blockly.SYNTH.ORDER_NONE)||"false",e+="\n else "+c);return e+"\n"};function signal_type_check(a,b){return a.type!=b.type?(error=error+"The types of these signalnames "+a.name+" type="+a.type+" and "+b.name+" type="+b.type+" are conflicting\n",!1):!0}
function library_check(a){return("std_logic"!=a.type&&"std_ulogic"!=a.type&&"std_logic_vector"!=a.type&&"std_ulogic_vector"!=a.type||-1==window.library.indexOf("std_logic_1164"))&&("signed"!=a.type&&"unsigned"!=a.type||-1==window.library.indexOf("numeric_bit")&&-1==window.library.indexOf("numeric_std"))?(error=error+"The type "+a.type+" of signal "+a.name+" is not supported by a library\n",!1):!0}
function signal_value_check(a){return("u"!=a.val&&"x"!=a.val&&"0"!=a.val&&"1"!=a.val&&"z"!=a.val&&"w"!=a.val&&"h"!=a.val&&"dc"!=a.val||"std_logic"!=a.type&&"std_ulogic"!=a.type&&"std_logic_vector"!=a.type&&"std_ulogic_vector"!=a.type)&&"0"!=a.val&&"1"!=a.val?(error=error+"The signal value "+a.val+" of signal "+a.name+" does not match with its signal type "+a.type+"\n",!1):!0}
function check_equal_length(a,b){return a.val.length!=b.val.length?(error=error+"Signals "+a.name+" and "+b.name+" dont have vectors of the same lenght\n",!1):!0}function check_combi(a,b){return 1==signal_type_check(a,b)&&1==library_check(a)&&1==signal_value_check(a)&&1==signal_value_check(b)&&1==check_equal_length(a,b)?!0:!1}
function and(a,b){var d=[],c="";if(1==check_combi(a,b)){d.u={u:"u",x:"u",0:"0",1:"u",z:"u",w:"0",l:"u",h:"u",dc:"z"};d.x={u:"u",x:"x",0:"0",1:"x",z:"x",w:"0",l:"x",h:"x",dc:"x"};d["0"]={u:"0",x:"0",0:"0",1:"0",z:"0",w:"0",l:"0",h:"0",dc:"0"};d["1"]={u:"u",x:"x",0:"0",1:"1",z:"x",w:"0",l:"1",h:"x",dc:"x"};d.z={u:"u",x:"x",0:"0",1:"x",z:"x",w:"0",l:"x",h:"x",dc:"z"};d.w={u:"u",x:"x",0:"0",1:"x",z:"x",w:"0",l:"x",h:"x",dc:"x"};d.l={u:"0",x:"0",0:"0",1:"0",z:"0",w:"0",l:"0",h:"0",dc:"0"};d.h={u:"u",x:"x",
0:"0",1:"1",z:"x",w:"0",l:"1",h:"x",dc:"x"};d.dc={u:"u",x:"x",0:"0",1:"x",z:"x",w:"0",l:"x",h:"x",dc:"x"};for(var e=0;e<a.val.length;e++)c+=d[a.val[e]][b.val[e]];return c}return"0"}
function or(a,b){var d=[],c="";if(1==check_combi(a,b)){d.u={u:"u",x:"u",0:"u",1:"1",z:"u",w:"u",l:"u",h:"1",dc:"u"};d.x={u:"u",x:"x",0:"x",1:"1",z:"x",w:"x",l:"x",h:"1",dc:"x"};d["0"]={u:"u",x:"x",0:"0",1:"1",z:"x",w:"x",l:"0",h:"1",dc:"x"};d["1"]={u:"1",x:"1",0:"1",1:"1",z:"1",w:"0",l:"1",h:"1",dc:"1"};d.z={u:"u",x:"x",0:"x",1:"1",z:"x",w:"1",l:"x",h:"1",dc:"x"};d.w={u:"u",x:"x",0:"x",1:"1",z:"x",w:"x",l:"x",h:"1",dc:"x"};d.l={u:"u",x:"x",0:"0",1:"1",z:"x",w:"x",l:"0",h:"1",dc:"x"};d.h={u:"1",x:"1",
0:"1",1:"1",z:"1",w:"1",l:"1",h:"1",dc:"1"};d.dc={u:"u",x:"x",0:"x",1:"1",z:"x",w:"x",l:"x",h:"1",dc:"x"};for(var e=0;e<a.val.length;e++)c+=d[a.val[e]][b.val[e]];return c}return"0"}
function xor(a,b){var d=[],c="";if(1==check_combi(a,b)){d.u={u:"u",x:"u",0:"u",1:"u",z:"u",w:"u",l:"u",h:"u",dc:"u"};d.x={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};d["0"]={u:"u",x:"x",0:"0",1:"1",z:"x",w:"x",l:"0",h:"1",dc:"x"};d["1"]={u:"1",x:"x",0:"1",1:"0",z:"x",w:"x",l:"1",h:"0",dc:"x"};d.z={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};d.w={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};d.l={u:"u",x:"x",0:"0",1:"1",z:"x",w:"x",l:"0",h:"1",dc:"x"};d.h={u:"1",x:"1",
0:"1",1:"0",z:"x",w:"x",l:"1",h:"0",dc:"x"};d.dc={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};for(var e=0;e<a.val.length;e++)c+=d[a.val[e]][b.val[e]];return c}return"0"}function not(a){var b="";if(1==library_check(a)&&1==signal_value_check(a)){var d={u:"u",x:"x",0:"1",1:"0",z:"x",w:"x",l:"1",h:"0",dc:"x"};for(var c=0;c<a.val.length;c++)b+=d[a.val[c]];return b}return"0"}function nand(a,b){var d={val:"",type:""};d.val=and(a,b);d.type=a.type;d.name="notport";return not(d)}
function nor(a,b){return not(or(a,b))}function xnor(a,b){return not(xor(a,b))}
function resolution(a,b){var d=[],c="";if(1==check_combi(a,b)){d.u={u:"u",x:"u",0:"u",1:"u",z:"=",w:"u",l:"u",h:"u",dc:"u"};d.x={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};d["0"]={u:"u",x:"x",0:"0",1:"x",z:"0",w:"0",l:"0",h:"0",dc:"x"};d["1"]={u:"u",x:"x",0:"x",1:"1",z:"1",w:"1",l:"1",h:"1",dc:"x"};d.z={u:"u",x:"x",0:"0",1:"1",z:"z",w:"w",l:"l",h:"h",dc:"x"};d.w={u:"u",x:"x",0:"0",1:"1",z:"w",w:"w",l:"w",h:"w",dc:"x"};d.l={u:"u",x:"x",0:"0",1:"1",z:"l",w:"w",l:"l",h:"w",dc:"x"};d.h={u:"u",
x:"x",0:"0",1:"1",z:"h",w:"w",l:"w",h:"h",dc:"x"};d.dc={u:"u",x:"x",0:"x",1:"x",z:"x",w:"x",l:"x",h:"x",dc:"x"};for(var e=0;e<a.val.length;e++)c+=d[a.val[e]][b.val[e]];return c}return"0"};Blockly.SYNTH.assert=function(a){var b=Blockly.SYNTH.valueToCode(a,"condition",Blockly.SYNTH.ORDER_NONE),d=Blockly.SYNTH.valueToCode(a,"test_String",Blockly.SYNTH.ORDER_NONE);a=a.getFieldValue("severity");return"assert "+b+" report "+d+" severity "+a+";\n"};
Blockly.SYNTH.testbench=function(a){var b=a.getFieldValue("testbench"),d=Blockly.SYNTH.statementToCode(a,"testbench");a=d.split(";");for(var c=0;c<a.length;c++)a[c]=a[c].trim(),a[c]=a[c].split(" ");var e=d+"\n\n";for(c=0;c<a.length-1;c++)-1==a[c][1].indexOf("out")&&-1==a[c][1].indexOf("internal")&&(d=a[c][1].replace("inp_",""),e=e+d+".val=false;"+d+".pre='';"+d+".data='';"+d+".wave='';\n");e=e+"for (n=0; n<"+(a[0][3].length-2)+"; n++){\n";for(c=0;c<a.length-1;c++)-1==a[c][1].indexOf("out")&&-1==a[c][1].indexOf("internal")&&
(e=e+"if ("+a[c][1]+"[n]=='.') {"+a[c][1].slice(4)+".val="+a[c][1].slice(4)+".pre} else {"+a[c][1].slice(4)+".val="+a[c][1]+"[n]};\n");e=e+b+"()\n";for(c=0;c<a.length-1;c++)-1==a[c][1].indexOf("out")&&-1==a[c][1].indexOf("internal")&&(e=e+a[c][1].slice(4)+"f('', false)\n");e=e+"if (latch || error"+b+"!='') {\nbreak}\n";for(c=0;c<a.length-1;c++)-1!=a[c][1].indexOf("out")&&(alert(a[c][1].indexOf("out")+" "+a[c][1]),e=e+"if ("+a[c][1]+".substring(0,n+1)!="+a[c][1].slice(4)+".wave && "+a[c][1]+".length>0){error"+
b+"= 'output "+a[c][1].slice(4)+" is not equal as expected at cycle ' + (n + 1); break\n}");e+="}\n\x3c/script>\n";e+='<script type="WaveDrom">\n';e+="{ signal : [\n";for(c=0;c<a.length-1;c++)-1!=a[c][1].indexOf("out")||a[c][1].indexOf("int"),e=e+"{ name: '"+a[c][1].substr(4)+"' , wave: "+a[c][1].substr(4)+".wave, data: "+a[c][1].substr(4)+".data},\n";e+="]}";e+="\n\x3c/script>\n";e=e+'<div id="log'+b+'"></div>\n<script>\n';return e+'document.getElementById("log'+b+'").innerHTML = window.error'+b};
Blockly.SYNTH.tb_clockgen=function(a){var b=a.getFieldValue("clockname");a=a.getFieldValue("periods");b="{name: '"+b+"', wave: 'p";for(var d=0;d<a;d++)b+=".";return b+"'},\n"};Blockly.SYNTH.tb_signal=function(a){var b=a.getFieldValue("signalname");a=a.getFieldValue("trace");a=a.replace(/ /g,"u");return"var inp_"+b+" = '"+a+"';\n"};Blockly.SYNTH.testbench_out=function(a){var b=a.getFieldValue("output");a=a.getFieldValue("trace");alert(a);a=a.replace(/ /g,"u");return"var out_"+b+" = '"+a+"';\n"};
Blockly.SYNTH.tb_out=function(a){var b=a.getFieldValue("output");a=a.getFieldValue("trace");return"var out_"+b+" = '"+a+"';\n"};Blockly.SYNTH.tb_internal=function(a){return"var int_"+a.getFieldValue("internal")+" = '';\n"};